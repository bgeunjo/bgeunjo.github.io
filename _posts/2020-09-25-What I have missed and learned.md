---
layout: post
title:  "What I have missed and learned !"
date:   2020-09-25
categories: ["2020","etc"]
update: 2020-09-27

---

dreamhack ë¬¸ì œë¥¼ í’€ê³  ë„ˆë¬´ ê¸°ë¶„ì´ ì¢‹ì•„ì„œ ë¡¸ì—…ì„ ì“°ë ¤ê³  í–ˆì§€ë§Œ, dreamhackì€ ë¡¸ì—…ì„ ë°°í¬í•˜ëŠ” ê²Œ ê¸ˆì§€ë¼ ê·¸ëƒ¥ ë°°ìš´ ì ë§Œ ë‚¨ê¸°ë ¤ê³  í•œë‹¤.



ë‚´ê°€ ì‚½ì§ˆì„ í•œ í¬ì¸íŠ¸ê°€ ë‘ êµ°ë° ìˆëŠ”ë°, ë‘˜ ë‹¤ ë°°ìš´ ê²Œ ìˆëŠ” ê±° ê°™ì•„ì„œ ê¸°ë¶„ì€ ì¢‹ë‹¤.



### ğŸ§° ì‚½ì§ˆ point 1

ì…ë ¥ë°›ì€ ë³€ìˆ˜ë¡œ ëª…ë ¹ì–´ì™€ ëª…ë ¹ì–´ì˜ ì¸ìë“¤ì„ êµ¬ì„±í•˜ëŠ” ë¬¸ì œì˜€ë‹¤. ì—¬ê¸°ì„œ typeì„ ë°”ê¿” `try~catch`ë¬¸ì—ì„œ ì¼ë¶€ëŸ¬ `catch`ë¬¸ìœ¼ë¡œ íë¦„ì„ ì´ë™ì‹œí‚¨ ë‹¤ìŒ, ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œí‚¤ë ¤ê³  í–ˆë‹¤. ì•„ì´ë””ì–´ëŠ” ì¢‹ì•˜ì§€ë§Œ ì²˜ìŒì—ëŠ” ì–´ë–»ê²Œ ëª…ë ¹ì–´ì™€ ì¸ìë“¤ì„ ê°ê° ë„£ì–´ì¤˜ì•¼ í•  ì§€ ëª°ë¼ì„œ ì‹œê°„ì„ ë³´ëƒˆë‹¤.

ê²°ê³¼ì ìœ¼ë¡œ ëª…ë ¹ì–´ëŠ” ê³µë°±ì´ ì—†ëŠ” ë¬¸ìì—´, ì¸ìëŠ” ë°°ì—´ or `undefined`ì—¬ì•¼ í–ˆëŠ”ë°, ì¸ìë¥¼ ë°°ì—´ë¡œ ì£¼ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ ë³´ëƒˆë‹¤:

```
?q[0]=command&q[1][0]=arg1&q[1][1]=arg2
```

ì´ì œ ì›í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìƒíƒœë‹¤.

â— **ë°°ìš´ ì **: type ë°”ê¿”ê°€ë©´ì„œ ìš°íšŒí•˜ëŠ” ë²•ì„ ì§ì ‘ ì¨ë´¤ê³  í•œë°œ ë” ë‚˜ì•„ê°€ì„œ ì´ì°¨ì› ë°°ì—´ê¹Œì§€ ì¨ê°€ë©´ì„œ get ë³€ìˆ˜ë¥¼ ì¤„ ìˆ˜ ìˆë‹¤.

### ğŸ§° ì‚½ì§ˆ point 2

ì›í•˜ëŠ” ëª…ë ¹ì–´ëŠ” ì‹¤í–‰í•  ìˆ˜ ìˆì§€ë§Œ ë¬´ìŠ¨ ëª…ë ¹ì–´ë¡œ, ì–´ë–»ê²Œ flagë¥¼ ì½ì–´ì•¼ í•˜ëŠ” ì§€ ëª°ëë‹¤. reverse shell, webshell, file read ë“±ë“± ì‹œë„í•´ë´¤ì§€ë§Œ ë‹¤ ì•ˆëë‹¤. 

ì €ë ‡ê²Œ í•œ ì´ìœ ê°€ ì²˜ìŒì—ëŠ” ë‚´ê°€ `req.session`ì •ë³´ë¥¼ ë°”ê¿€ ìˆ˜ ì—†ë‹¤ê³  ìƒê°í–ˆë‹¤. ë¶„ëª…íˆ `get`ìœ¼ë¡œ sessionì— ëŒ€í•œ ì •ë³´ë¥¼ ë´¤ëŠ”ë°ë„ ê·¸ë¬ë‹¤. ì™œëƒë©´ !!!!!! ë‚´ê°€ ë¡œê·¸ì¸ì„ ì•ˆí•˜ê³  session ì •ë³´ë¥¼ ë´¤ê¸° ë•Œë¬¸ì´ë‹¤..ğŸ˜¥



ì—¬ê¸°ì„œë„ ë°°ìš´ ì ? ì´ë¼ í•˜ê¸´ ì¢€ ì• ë§¤í•œë° ë‹¤ìŒë¶€í„° ë¡œê·¸ì¸ì„ í•  ìˆ˜ ìˆìœ¼ë©´ ë¡œê·¸ì¸ì„ í•˜ê³ ! ë¬¸ì œë¥¼ í’€ì–´ì•¼ê² ë‹¤.

ë¡œê·¸ì¸í•˜ê³  session ë‹¤ì‹œ ë³´ë‹ˆ useridê°€ ê³ ìŠ¤ë€íˆ ë‹´ê²¨ ìˆì–´ì„œ ëª…ë ¹ì–´ ì‹¤í–‰í•´ì„œ ë°”ê¿€ ìˆ˜ ìˆì—ˆë‹¤..



â— **ë°°ìš´ ì **: ë¡œê·¸ì¸ì„ í•˜ê³ .. ë­ë¼ë„ í•´ë³´ì.



â— **ì „ì²´ì ìœ¼ë¡œ ë°°ìš´ ì !** : ë¡œì»¬ì—ì„œ í•˜ë‚˜í•˜ë‚˜ í…ŒìŠ¤íŠ¸í•´ë³´ë©´ì„œ í•˜ëŠ” ê²Œ ì¢‹ì€ ê²ƒ ê°™ë‹¤. ëª‡ì¼ ì†ìœ¼ë¡œ ë„ì ì´ëŠ” ê±° ë³´ë‹¤ 1ì‹œê°„ ë¡œì»¬ì—ì„œ í•˜ëŠ” ê²Œ ë” íš¨ê³¼ê°€ ìˆì—ˆë‹¤.

---

â— sqlite3ì—ì„œ `select` í‚¤ì›Œë“œê°€ í•„í„°ë§ë˜ì–´ ìˆìœ¼ë©´ `union value()`ë¡œ ë°”ê¿”ì„œ ì“¸ ìˆ˜ ìˆë‹¤ ! ì²¨ì— ì™œì¸ì§„ ëª¨ë¥´ê² ì§€ë§Œ `insert into`ë¥¼ í•´ì£¼ë‹ˆê¹Œ ì˜¤ë¥˜ê°€ ë‚˜ì„œ ì €ë ‡ê²Œ í•´ì„œ í’€ì—ˆë‹¤ ğŸ¤” ë”±íˆ í•„í„°ë§ì´ ë§ì´ ë¼ìˆëŠ” ê±´ ì•„ë‹ˆë¼ì„œ ê·¸ë ‡ê²Œ ì–´ë µì§„ ì•Šì•˜ë‹¤!

---

### CCE 2020 - What I have missed and learned ! 

CCE 2020 í•˜ë©´ì„œ ë°°ìš´ê±´ë° ë¬¸ì œì—ì„œ `$_GET['idx']`ë¥¼ ë°›ê³ , ê·¸ ê°’ì„ ê²€ì¦í•  ë•ŒëŠ” `$_REQUEST['idx']`ë¡œ í–ˆë‹¤. ì·¨ì•½ì ì€ `$_GET`ì´ ì•„ë‹ˆë¼ `$_REQUEST`ë¥¼ ê²€ì¦í•˜ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ”ë°, ëŒ€íšŒê°€ ëë‚˜ê³  ì¹œêµ¬ê°€ ë§í¬ë¥¼ ë³´ë‚´ì¤˜ì„œ ë´¤ë”ë‹ˆ ë¬´ìŠ¨ ë§ì¸ì§€ ì•Œ ê±° ê°™ì•˜ë‹¤.

> ğŸš€ [https://www.php.net/manual/en/ini.core.php#ini.variables-order](https://www.php.net/manual/en/ini.core.php#ini.variables-order){:target="_blank"}

`php.ini`íŒŒì¼ì—ì„œ ì„¤ì •ì„ í•´ì¤„ ë•Œ Dataë¥¼ ì–´ë–»ê²Œ ë‹¤ë£°ì§€ì— ëŒ€í•´ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì´ ìˆë‹¤. ê±°ê¸°ì„œ **variables_order**ì™€ **request_order**ê°€ ìˆëŠ”ë°, ê°ê°ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:

- **variables_order** : Sets the order of the EGPCS (`E`nvironment, `G`et, `P`ost, `C`ookie, and `S`erver) variable parsing.

- **request_order** : This directive describes the order in which PHP registers GET, POST and Cookie variables into the `_REQUEST` array. Registration is done from left to right, newer values override older values. If this directive is not set,`variables_order` is used for `$_REQUEST`contents.

ì¦‰ ê²€ì¦ì„ í•  ë•Œ `GET`ê³¼ `POST`ë¡œ ë‘˜ë‹¤ ë³´ë‚´ë²„ë¦¬ë©´ ê²€ì¦ì€ `POST`ë¡œ í•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤. ê·¸ë˜ì„œ `GET`ì—ì„œëŠ” sqliê°€ ê°€ëŠ¥í•˜ë‹¤!



â— **ë°°ìš´ ì ** : ì²˜ìŒì— ë¬¸ì œë¥¼ ë³´ê³  í”Œë˜ê·¸ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆëŠ” ë°©ë²•ë“¤ì„ ë‚˜ì—´í•´ë´¤ì„ ë•Œ ì € ë°©ë²•ë„ ë‹¹ì—°íˆ ìˆì—ˆë‹¤. ê·¼ë° `$_REQUEST['idx']`ë¡œ ê²€ì¦í•˜ë‹ˆê¹Œ í˜ë“¤ê² ë„¤.. í•˜ê³  ë„˜ì–´ê°”ì—ˆë‹¤. ì…ë ¥í•˜ëŠ” ê°’ê³¼ ê²€ì¦í•˜ëŠ” ê°’ì´ ì •í™•íˆ ë­”ì§€ ê¼¼ê¼¼íˆ í™•ì¸í•´ë´ì•¼ê² ë‹¤ ! 

â— **ëŒ€íšŒí•˜ê³  ë‚˜ì„œ ëŠë‚€ ì ** : ì•„ì§ í•˜ë£¨ì¢…ì¼ ëŒ€íšŒí•˜ëŠ” ê±°ì— ìµìˆ™í•˜ì§€ ì•Šì•„ ì¤‘ê°„ì— ì§‘ì¤‘ë ¥ì´ ë–¨ì–´ì§€ëŠ” ëŠë‚Œì„ ë§ì´ ë°›ì•˜ë‹¤. ì½”ë“œë¥¼ ë³´ê³  ìˆëŠ”ë° ëˆˆì—ë„ ì•ˆ ë“¤ì–´ì˜¤ê³  ê·¸ë¬ë‹¤. ê·¸ë˜ì„œ ì¢€ ì˜¤ë˜ ì§‘ì¤‘í•˜ëŠ” ì—°ìŠµì„ í•´ì•¼ê² ë‹¤. ê·¸ë¦¬ê³  ë³¸ì„ ì„ ê°€ë©´ ë°°ìš¸ ì ì´ ë§ì„ ê±°ë¼ê³  ì¹œêµ¬ê°€ ë§í•´ì¤¬ë‹¤. ì¢‹ì€ ê¸°íšŒë¥¼ ë°›ì€ ê±° ê°™ì•„ ì¢‹ì•˜ë‹¤ ! ìˆ˜ìƒì„ ëª©í‘œë¡œ ì—´ì‹¬íˆ í•´ì•¼ê² ë‹¤.ğŸ‘



