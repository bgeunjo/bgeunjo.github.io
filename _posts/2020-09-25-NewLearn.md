---
layout: post
title:  "NewLearn"
date:   2020-09-23
categories: ["2020","etc"]
---

dreamhack 문제를 풀고 감격해서 롸업을 쓰려고 했지만, dreamhack은 롸업을 배포하는 게 금지이므로 그냥 배운 점만 남기려고 한다.



내가 삽질을 한 포인트가 두 군데 있는데, 두 지점에서 전부 배운 게 있는 거 같아서 기분은 좋다.



### 🧰 삽질 point 1

입력받은 변수로 명령어와 명령어의 인자들을 구성하는 문제였다. 여기서 type을 바꿔 `try~catch`문에서 일부러 `catch`문으로 흐름을 이동시킨 다음, 명령어를 실행시키려고 했다. 아이디어는 좋았지만 처음에는 어떻게 명령어와 인자들을 각각 넣어줘야 할 지 몰라서 시간을 보냈다.

결과적으로 명령어는 공백이 없는 문자열, 인자는 배열 or `undefined`여야 했는데, 인자를 배열로 주기 위해 다음과 같이 보냈다:

```
?q[0]=command&q[1][0]=arg1&q[1][1]=arg2
```

이제 원하는 명령어를 실행할 수 있는 상태다.

❗ **배운 점**: type 바꿔가면서 우회하는 법을 직접 써봤고 한발 더 나아가서 이차원 배열까지 써가면서 get 변수를 줄 수 있다.

### 🧰 삽질 point 2

원하는 명령어는 실행할 수 있지만 무슨 명령어로, 어떻게 flag를 읽어야 하는 지 몰랐다. reverse shell, webshell, file read 등등 시도해봤지만 다 안됐다. 

저렇게 한 이유가 처음에는 내가 `req.session`정보를 바꿀 수 없다고 생각했다. 분명히 `get`으로 session에 대한 정보를 봤는데도 그랬다. 왜냐면 !!!!!! 내가 로그인을 안하고 session 정보를 봤기 때문이다 엉엉. 



여기서도 배운 점? 이라 하긴 좀 애매한데 다음부터 로그인을 할 수 있으면 로그인을 하고! 문제를 풀어야겠다.

로그인하고 session 다시 보니 userid가 고스란히 담겨 있어서 명령어 실행해서 바꿀 수 있었다..



❗ **배운 점**: 로그인을 하고.. 뭐라도 해보자.



❗ **전체적으로 배운 점!** : 로컬에서 하나하나 테스트해보면서 하는 게 좋은 것 같다. 몇일 손으로 끄적이는 거 보다 1시간 로컬에서 하는 게 더 효과가 있었다.





